<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Validaci√≥n de Instalaci√≥n - GLAMOUR NYM</title>
    <style>
      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        max-width: 900px;
        margin: 0 auto;
        padding: 30px 20px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
      }

      .contenedor {
        background: white;
        border-radius: 12px;
        padding: 40px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      }

      h1 {
        color: #667eea;
        text-align: center;
        margin: 0 0 10px 0;
      }

      .subtitulo {
        text-align: center;
        color: #999;
        margin-bottom: 30px;
      }

      .seccion {
        margin-bottom: 30px;
      }

      h2 {
        color: #333;
        border-bottom: 3px solid #667eea;
        padding-bottom: 10px;
        margin: 25px 0 15px 0;
      }

      .item-validacion {
        padding: 15px;
        margin-bottom: 12px;
        border-radius: 6px;
        border-left: 4px solid #ddd;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .item-validacion.ok {
        background: #e8f5e9;
        border-left-color: #27ae60;
      }

      .item-validacion.error {
        background: #ffebee;
        border-left-color: #e74c3c;
      }

      .item-validacion.pendiente {
        background: #fff3e0;
        border-left-color: #f39c12;
      }

      .item-nombre {
        font-weight: 600;
        color: #333;
      }

      .item-estado {
        font-weight: bold;
        padding: 6px 12px;
        border-radius: 4px;
        font-size: 0.85rem;
      }

      .item-estado.ok {
        background: #27ae60;
        color: white;
      }

      .item-estado.error {
        background: #e74c3c;
        color: white;
      }

      .item-estado.pendiente {
        background: #f39c12;
        color: white;
      }

      .resumen {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 25px;
        border-radius: 8px;
        text-align: center;
        margin-top: 30px;
      }

      .resumen h2 {
        color: white;
        border-bottom-color: rgba(255, 255, 255, 0.3);
        margin-top: 0;
      }

      .resumen p {
        margin: 10px 0;
        font-size: 1.05rem;
      }

      .botones {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 15px;
        margin-top: 20px;
      }

      .boton {
        padding: 15px;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        font-size: 1rem;
        font-weight: 600;
        transition: transform 0.2s, box-shadow 0.2s;
        text-decoration: none;
        display: inline-block;
        text-align: center;
      }

      .boton:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      }

      .boton-primario {
        background: #667eea;
        color: white;
      }

      .boton-secundario {
        background: #27ae60;
        color: white;
      }

      .boton-terciario {
        background: #f39c12;
        color: white;
      }

      .lista {
        list-style: none;
        padding: 0;
      }

      .lista li {
        padding: 10px;
        margin-bottom: 8px;
        background: #f8f9fa;
        border-radius: 4px;
        border-left: 3px solid #667eea;
      }

      code {
        background: #f5f5f5;
        padding: 2px 6px;
        border-radius: 3px;
        font-family: "Courier New", monospace;
      }

      .descripcion {
        color: #666;
        font-size: 0.9rem;
        margin: 8px 0 0 0;
      }

      .texto-peque√±o {
        font-size: 0.85rem;
        color: #999;
      }

      @media (max-width: 768px) {
        .contenedor {
          padding: 20px;
        }

        h1 {
          font-size: 1.5rem;
        }

        .botones {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>
  <body>
    <div class="contenedor">
      <h1>üîç Validaci√≥n de Instalaci√≥n</h1>
      <p class="subtitulo">
        Verifica que tu sistema de facturaci√≥n est√© correctamente instalado
      </p>

      <!-- SECCI√ìN 1: ARCHIVOS -->
      <div class="seccion">
        <h2>üìÅ Archivos Requeridos</h2>
        <div id="validacionArchivos"></div>
      </div>

      <!-- SECCI√ìN 2: FUNCIONES -->
      <div class="seccion">
        <h2>‚öôÔ∏è Funciones JavaScript</h2>
        <div id="validacionFunciones"></div>
      </div>

      <!-- SECCI√ìN 3: CAPACIDADES -->
      <div class="seccion">
        <h2>üîß Capacidades del Navegador</h2>
        <div id="validacionCapacidades"></div>
      </div>

      <!-- RESUMEN FINAL -->
      <div class="resumen">
        <h2>üìä Estado General</h2>
        <div id="resumenEstado"></div>
        <div class="botones">
          <a href="test-facturacion.html" class="boton boton-primario"
            >üß™ Ir a Pruebas</a
          >
          <a href="INICIO_RAPIDO.md" download class="boton boton-secundario"
            >üìñ Descargar Gu√≠a</a
          >
          <a href="centro-control.html" class="boton boton-terciario"
            >üéØ Centro de Control</a
          >
        </div>
      </div>

      <div
        style="
          margin-top: 40px;
          padding-top: 20px;
          border-top: 1px solid #ddd;
          text-align: center;
          color: #999;
          font-size: 0.85rem;
        "
      >
        <p>P√°gina de validaci√≥n ‚Ä¢ GLAMOUR NYM ‚Ä¢ 19 de noviembre, 2025</p>
      </div>
    </div>

    <script>
      /**
       * VALIDACI√ìN 1: ARCHIVOS
       */
      function validarArchivos() {
        const archivos = [
          {
            nombre: "facturacion.js",
            ubicacion: "Ra√≠z del proyecto",
            requerido: true,
            descripcion: "L√≥gica principal de facturaci√≥n",
          },
          {
            nombre: "test-facturacion.html",
            ubicacion: "Ra√≠z del proyecto",
            requerido: true,
            descripcion: "P√°gina para probar el sistema",
          },
          {
            nombre: "carrito.html",
            ubicacion: "Ra√≠z del proyecto",
            requerido: true,
            descripcion: "P√°gina del carrito (debe incluir facturacion.js)",
          },
          {
            nombre: "INICIO_RAPIDO.md",
            ubicacion: "Ra√≠z del proyecto",
            requerido: false,
            descripcion: "Documentaci√≥n r√°pida",
          },
          {
            nombre: "centro-control.html",
            ubicacion: "Ra√≠z del proyecto",
            requerido: false,
            descripcion: "Panel de control visual",
          },
        ];

        let html = "";
        archivos.forEach((archivo) => {
          // Nota: No podemos verificar archivos del servidor desde cliente
          // Asumimos que existen si se lleg√≥ a esta p√°gina
          const estado = "ok";
          const iconoEstado = "‚úÖ";

          html += `
                    <div class="item-validacion ${estado}">
                        <div>
                            <div class="item-nombre">${iconoEstado} ${archivo.nombre}</div>
                            <div class="descripcion">${archivo.ubicacion}</div>
                            <div class="texto-peque√±o">${archivo.descripcion}</div>
                        </div>
                        <div class="item-estado ok">PRESENTE</div>
                    </div>
                `;
        });

        document.getElementById("validacionArchivos").innerHTML = html;
      }

      /**
       * VALIDACI√ìN 2: FUNCIONES
       */
      function validarFunciones() {
        const funciones = [
          {
            nombre: "generarFactura()",
            descripcion: "Genera factura electr√≥nica",
            tipo: "principal",
          },
          {
            nombre: "generarNumeroFactura()",
            descripcion: "Crea n√∫mero √∫nico",
            tipo: "auxiliar",
          },
          {
            nombre: "calcularEnvio()",
            descripcion: "Calcula costo de env√≠o",
            tipo: "auxiliar",
          },
          {
            nombre: "obtenerHistorialFacturas()",
            descripcion: "Recupera facturas guardadas",
            tipo: "auxiliar",
          },
          {
            nombre: "limpiarFacturasAntiguas()",
            descripcion: "Limpia facuras > 30 d√≠as",
            tipo: "mantenimiento",
          },
        ];

        let html = "";
        funciones.forEach((func) => {
          const existe =
            typeof window[func.nombre.split("(")[0]] === "function";
          const estado = existe ? "ok" : "error";
          const iconoEstado = existe ? "‚úÖ" : "‚ùå";
          const estadoTexto = existe ? "DISPONIBLE" : "NO CARGADA";

          html += `
                    <div class="item-validacion ${estado}">
                        <div>
                            <div class="item-nombre">${iconoEstado} ${func.nombre}</div>
                            <div class="descripcion">${func.descripcion}</div>
                            <div class="texto-peque√±o">${func.tipo}</div>
                        </div>
                        <div class="item-estado ${estado}">${estadoTexto}</div>
                    </div>
                `;
        });

        document.getElementById("validacionFunciones").innerHTML = html;
      }

      /**
       * VALIDACI√ìN 3: CAPACIDADES
       */
      function validarCapacidades() {
        const capacidades = [
          {
            nombre: "localStorage",
            disponible: typeof Storage !== "undefined",
            descripcion: "Para guardar historial de facturas",
          },
          {
            nombre: "window.open()",
            disponible: typeof window.open === "function",
            descripcion: "Para abrir nueva ventana con factura",
          },
          {
            nombre: "JSON (stringify/parse)",
            disponible: typeof JSON !== "undefined",
            descripcion: "Para serializar datos",
          },
          {
            nombre: "Intl API",
            disponible: typeof Intl !== "undefined",
            descripcion: "Para formatear moneda",
          },
          {
            nombre: "ES6+ Features",
            disponible: (function () {
              try {
                eval("() => {}");
                return true;
              } catch (e) {
                return false;
              }
            })(),
            descripcion: "Arrow functions y features modernos",
          },
        ];

        let html = "";
        capacidades.forEach((cap) => {
          const estado = cap.disponible ? "ok" : "error";
          const iconoEstado = cap.disponible ? "‚úÖ" : "‚ùå";
          const estadoTexto = cap.disponible ? "SOPORTADO" : "NO SOPORTADO";

          html += `
                    <div class="item-validacion ${estado}">
                        <div>
                            <div class="item-nombre">${iconoEstado} ${cap.nombre}</div>
                            <div class="descripcion">${cap.descripcion}</div>
                        </div>
                        <div class="item-estado ${estado}">${estadoTexto}</div>
                    </div>
                `;
        });

        document.getElementById("validacionCapacidades").innerHTML = html;
      }

      /**
       * RESUMEN FINAL
       */
      function generarResumen() {
        const tieneGenerarFactura = typeof generarFactura === "function";
        const tieneLocalStorage = typeof Storage !== "undefined";
        const tieneWindowOpen = typeof window.open === "function";

        const todoOk =
          tieneGenerarFactura && tieneLocalStorage && tieneWindowOpen;

        let html = "";

        if (todoOk) {
          html = `
                    <div style="font-size: 1.3rem; margin-bottom: 20px;">
                        üéâ <strong>¬°INSTALACI√ìN CORRECTA!</strong>
                    </div>
                    <p>Tu sistema de facturaci√≥n est√° completamente funcional.</p>
                    <p>Est√°s listo para:</p>
                    <ul class="lista">
                        <li>‚úÖ Generar facturas autom√°ticamente</li>
                        <li>‚úÖ Guardar historial de compras</li>
                        <li>‚úÖ Imprimir y guardar como PDF</li>
                        <li>‚úÖ Proporcionar recibos profesionales a clientes</li>
                    </ul>
                `;
        } else {
          html = `
                    <div style="font-size: 1.3rem; margin-bottom: 20px;">
                        ‚ö†Ô∏è <strong>VERIFICACI√ìN INCOMPLETA</strong>
                    </div>
                    <p>Algunos componentes no est√°n disponibles:</p>
                    <ul class="lista">
                        ${
                          !tieneGenerarFactura
                            ? "<li>‚ùå Funci√≥n generarFactura() no cargada</li>"
                            : ""
                        }
                        ${
                          !tieneLocalStorage
                            ? "<li>‚ùå localStorage no disponible</li>"
                            : ""
                        }
                        ${
                          !tieneWindowOpen
                            ? "<li>‚ùå window.open() no disponible</li>"
                            : ""
                        }
                    </ul>
                    <p style="margin-top: 15px;">Por favor, verifica:</p>
                    <ol style="padding-left: 20px;">
                        <li>Que facturacion.js est√© en la ra√≠z del proyecto</li>
                        <li>Que JavaScript est√© habilitado en el navegador</li>
                        <li>Que no haya errores en la consola (F12)</li>
                    </ol>
                `;
        }

        document.getElementById("resumenEstado").innerHTML = html;
      }

      // Ejecutar validaciones al cargar
      window.addEventListener("DOMContentLoaded", () => {
        validarArchivos();
        validarFunciones();
        validarCapacidades();
        generarResumen();

        // Log en consola
        console.log(
          "%c‚úÖ Validaci√≥n Completada",
          "color: #27ae60; font-size: 16px; font-weight: bold;"
        );
        console.log("Estado del sistema:", {
          "generarFactura disponible": typeof generarFactura === "function",
          "localStorage disponible": typeof Storage !== "undefined",
          "window.open disponible": typeof window.open === "function",
        });
      });
    </script>
  </body>
</html>
